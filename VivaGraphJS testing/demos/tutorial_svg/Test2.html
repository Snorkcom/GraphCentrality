<!DOCTYPE html>
<html>
<head>
    <title>TEST 2</title>
    <script type="text/javascript" src="../../dist/vivagraph.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        function main() {
            var graph = Viva.Graph.graph();
			var graphics = Viva.Graph.View.svgGraphics(),
                nodeSize = 24;

			//var x = '[["1","KARABAS"," -324.93054 260.56888 0.0"],["2","Leukemia"," 115.89487 -247.85858 0.0"],["3","Colon cancer"," 281.6182 -316.50793 0.0"],["4","Retinitis pigmentosa"," -443.77206 49.69957 0.0"],["5","Diabetes mellitus"," -12.715512 -184.89629 0.0"],["6","Cardiomyopathy"," -95.37502 278.0066 0.0"],["7","Mental retardation"," 280.53912 408.36023 0.0"],["8","Blood group"," 33.235836 90.64472 0.0"],["9","Obesity"," 47.382732 -109.748215 0.0"],["10","Breast cancer"," 277.7123 -200.27728 0.0"]]';
			var z = JSON.parse(x);			
			
			$.each(z, function(index, value){
				graph.addNode(value[0], value[1]);
			});
			///////////////////
			//x = '[["1","2","1.0"],["1","3","1.0"],["2","4","1.0"],["4","6","1.0"],["2","7","1.0"],["7","8","1.0"],["10","8","1.0"],["8","9","1.0"],["1","9","1.0"],["9","5","1.0"]]';
			z = JSON.parse(x);
			$.each(z, function(index, value){
				graph.addLink(value[0], value[1]);
			});
			
			var renderer = Viva.Graph.View.renderer(graph, {
                    graphics : graphics
                });
				
			
			graphics.node(function(node) {
				var ui = Viva.Graph.svg('g');
                var svgText = Viva.Graph.svg('text').attr('y', '-4px').attr('x',
						'-' + (nodeSize) + 'px').text(node.data);
				var img = Viva.Graph.svg('rect')
									.attr('width', nodeSize/2)
									.attr('height', nodeSize/2)
									.attr('fill', 'red');		
						
				ui.append(img);		
				ui.append(svgText);				
				return ui;
				})
				.placeNode(function(nodeUI, pos) {
				nodeUI.attr('transform', 'translate(' + (pos.x - nodeSize / 4)
						+ ',' + (pos.y - nodeSize / 4) + ')');
			});
			
			
            renderer.run();
			
			
			
	}
    </script>

    <style type="text/css" media="screen">
        html, body, svg { width: 100%; height: 100%;}
    </style>
</head>
<body onload='main()'>

</body>
</html>
